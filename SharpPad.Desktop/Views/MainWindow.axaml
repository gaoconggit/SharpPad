<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:SharpPad.Desktop.ViewModels"
        xmlns:webview="clr-namespace:AvaloniaWebView;assembly=Avalonia.WebView"
        x:Class="SharpPad.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/favicon.ico"
        Title="SharpPad Desktop"
        Width="1200"
        Height="800"
        MinWidth="800"
        MinHeight="600"
        WindowState="Maximized">

  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>

  <Grid x:Name="MainGrid">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Menu Bar -->
    <!--<Menu Grid.Row="0">
      <MenuItem Header="文件(_F)">
        <MenuItem Header="新建(_N)" Command="{Binding NewFileCommand}" InputGesture="Ctrl+N"/>
        <MenuItem Header="打开(_O)" Command="{Binding OpenFileCommand}" InputGesture="Ctrl+O"/>
        <MenuItem Header="保存(_S)" Command="{Binding SaveFileCommand}" InputGesture="Ctrl+S"/>
        <Separator/>
        <MenuItem Header="退出(_X)" Command="{Binding ExitCommand}" InputGesture="Alt+F4"/>
      </MenuItem>
      <MenuItem Header="编辑(_E)">
        <MenuItem Header="撤销(_U)" InputGesture="Ctrl+Z"/>
        <MenuItem Header="重做(_R)" InputGesture="Ctrl+Y"/>
        <Separator/>
        <MenuItem Header="查找(_F)" InputGesture="Ctrl+F"/>
        <MenuItem Header="替换(_H)" InputGesture="Ctrl+H"/>
      </MenuItem>
      <MenuItem Header="运行(_R)">
        <MenuItem Header="运行代码(_R)" InputGesture="F5"/>
        <MenuItem Header="停止运行(_S)" InputGesture="Shift+F5"/>
      </MenuItem>
      <MenuItem Header="帮助(_H)">
        <MenuItem Header="关于(_A)" Command="{Binding AboutCommand}"/>
      </MenuItem>
    </Menu>-->

    <!-- Main Content - WebView -->
	  <webview:WebView Grid.Row="1" 
                     x:Name="MainWebView"
                     Url="{Binding WebUrl}"
                     IsVisible="{Binding IsWebViewVisible}" />

    <!-- Mac Alternative Content -->
    <Border Grid.Row="1" 
            Background="LightGray"
            IsVisible="{Binding IsMacFallbackVisible}">
      <StackPanel HorizontalAlignment="Center" 
                  VerticalAlignment="Center"
                  Spacing="20">
        <TextBlock Text="SharpPad Desktop (Mac版本)" 
                   FontSize="24" 
                   FontWeight="Bold"
                   HorizontalAlignment="Center"/>
        <TextBlock Text="由于Mac平台WebView兼容性问题，请使用以下方式访问：" 
                   FontSize="16" 
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   Margin="20,0"/>
        <TextBlock x:Name="UrlTextBlock"
                   Text="{Binding WebUrl}" 
                   FontSize="14" 
                   FontWeight="Bold"
                   Foreground="Blue"
                   TextDecorations="Underline"
                   Cursor="Hand"
                   HorizontalAlignment="Center"/>
        <Button Content="在浏览器中打开" 
                Command="{Binding OpenInBrowserCommand}"
                FontSize="16"
                Padding="20,10"/>
        <TextBlock Text="提示：服务已在后台启动，您也可以手动复制上方链接到浏览器中访问" 
                   FontSize="12" 
                   Foreground="Gray"
                   TextWrapping="Wrap"
                   TextAlignment="Center"
                   MaxWidth="400"/>
      </StackPanel>
    </Border>

    <!-- Loading Indicator -->
    <Border Grid.Row="1" 
            Background="White"
            IsVisible="{Binding IsLoading}">
      <StackPanel HorizontalAlignment="Center" 
                  VerticalAlignment="Center">
        <TextBlock Text="正在启动 SharpPad..." 
                   FontSize="16" 
                   Margin="0,0,0,10"/>
        <ProgressBar IsIndeterminate="True" 
                     Width="200" 
                     Height="4"/>
      </StackPanel>
    </Border>
  </Grid>
</Window>